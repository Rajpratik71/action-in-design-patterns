# 2.简单工厂模式

## 2.1.问题引入

当我们使用接口时通常在客户端创建一个Impl实例,把它赋值给一个Api接口类型的变量,然后客户端通过这个变量来操作接口的功能.

代码示例

* 定义接口

```java

/**
 * 接口
 */
public interface Api {
    void test(String str);
}

```

* 定义接口实现

```java

/**
 * 接口实现
 */
public class Impl implements Api {
    public void test(String str) {
        System.out.println(str);
    }
}


```

会发现在客户端调用的时候，客户端不但知道了接口，同时还知道了具体的实现就是 Impl。接口的思想是“封装隔离”，而实现类 Impl 应该是被接口 Api 封装并同客户端隔离开的，客户端根本就不应该知道具体的实现类是 Impl。

问题描述：在编程中，出现只知接口而不知实现，该怎么办？就像现在的 Client，它知道要使用 Api 接口，但是不知由谁实现，也不知道如何实现，从而得不到接口对象，就无法使用接口，该怎么办呢？

## 2.2.解决方案

### 2.2.1.使用简单工厂来解决问题

* 简单工厂的定义

提供一个创建对象实例的功能，而无须关心其具体实现。被创建实例的类型可以是接口、抽象类，也可以是具体的类。

* 应用简单工厂来解决问题的思路

虽然不能让模块外部知道模块内部的具体实现，但是模块内部是可以知道实现类的，而且创建接口是需要具体实现类的。

那么，干脆在模块内部新建一个类，在这个类里面来创建接口，然后把创建好的接口返回给客户端，这样，外部应用就只需要根据这个类来获取相应的接口对象，然后就可以操作接口定义的方法了。把这样的类称为简单工厂，就叫它 Factory 吧。

客户端可以通过 Factory 来获取需要的接口对象，然后调用接口的方法来实现需要的功能，同时客户端不用再关心具体的实现。

### 2.2.2.结构和代码说明

![image](http://clsaa-design-pattern-1252032169.cossh.myqcloud.com/2-simplefactory/Jietu20180812-201031%402x.jpg)

* Api：定义客户所需要的功能接口。
* Impl：具体实现 Api 的实现类，可能会有多个。
* Factory：工厂，选择合适的实现类来创建 Api 接口对象。
* Client：客户端，通过 Factory 来获取 Api 接口对象，然后面向 Api 接口编程。